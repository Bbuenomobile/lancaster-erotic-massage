---
import Base from '../layouts/Base.astro';
import ListingCard from '../components/ListingCard.astro';
import InternalLinks from '../components/InternalLinks.astro';
import OwnerCTA from '../components/OwnerCTA.astro';
import CategoryNav from '../components/CategoryNav.astro';
import NetworkLinks from '../components/NetworkLinks.astro';
import GeoBanner from '../components/GeoBanner.astro';

// Safe fetch helper for build-time API calls
async function safeFetchJson(url: string): Promise<any[]> {
    try {
        console.log('Fetching:', url);
        const res = await fetch(url, {
            headers: { 
                'Accept': 'application/json',
                'User-Agent': 'ErotikMaps-Satellite-Builder/1.0',
                'X-Satellite-Build': 'true'
            }
        });
        
        if (!res.ok) {
            console.error('API returned ' + res.status + ': ' + res.statusText);
            return [];
        }
        
        const ct = res.headers.get('content-type') || '';
        if (!ct.includes('application/json')) {
            console.error('Expected JSON but got: ' + ct);
            return [];
        }
        
        const data = await res.json();
        return data.data || [];
    } catch (error) {
        console.error('Fetch failed:', error);
        return [];
    }
}

// Fetch listings from API at build time - with country fallback
const cityApiUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?city=lancaster&category=erotic-massage&limit=100';
let listings = await safeFetchJson(cityApiUrl);
let isCountryFallback = false;
let fallbackLocation = 'Lancaster';

// If no listings in city, fallback to country (Gold + premium + 20 others max)
if (listings.length === 0) {
    const countryApiUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?country=united-states&category=erotic-massage&limit=200';
    const allCountryListings = await safeFetchJson(countryApiUrl);
    
    if (allCountryListings.length > 0) {
        // Keep ALL gold and premium listings
        const goldOnes = allCountryListings.filter((l: any) => l.is_gold);
        const premiumOnes = allCountryListings.filter((l: any) => l.is_premium && !l.is_gold);
        // Non-premium: sort by ID (deterministic) and take max 20
        const others = allCountryListings.filter((l: any) => !l.is_premium && !l.is_gold);
        const selected = others.sort((a: any, b: any) => (a.id || 0) - (b.id || 0)).slice(0, 20);
        // Merge: gold first, then premium, then selection
        listings = [...goldOnes, ...premiumOnes, ...selected];
    }
    
    isCountryFallback = true;
    fallbackLocation = 'United States';
}

// Related categories mapping for cross-promotion
const relatedCategories: Record<string, { slug: string; label: string; icon: string }[]> = {
    'erotic-massage': [
        { slug: 'gentlemens-club', label: "Gentlemen's Clubs", icon: 'ü•Ç' },
        { slug: 'swinger-club', label: 'Swinger Clubs', icon: 'üíë' }
    ],
    'gentlemens-club': [
        { slug: 'erotic-massage', label: 'Erotic Massage', icon: 'üíÜ' },
        { slug: 'swinger-club', label: 'Swinger Clubs', icon: 'üíë' }
    ],
    'swinger-club': [
        { slug: 'erotic-massage', label: 'Erotic Massage', icon: 'üíÜ' },
        { slug: 'gentlemens-club', label: "Gentlemen's Clubs", icon: 'ü•Ç' }
    ]
};

// Fetch related category listings - with country fallback
const currentCategory = 'erotic-massage';
const related = relatedCategories[currentCategory] || [];
const relatedListings: { category: string; label: string; icon: string; listings: any[]; isCountry: boolean }[] = [];

for (const rel of related) {
    // Try city first
    let relUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?city=lancaster&category=' + rel.slug + '&limit=6';
    let relData = await safeFetchJson(relUrl);
    let isRelCountry = false;
    
    // Fallback to country if no city listings
    if (relData.length === 0) {
        relUrl = 'https://www.erotikmaps.com/api/v1/satellite/listings?country=united-states&category=' + rel.slug + '&limit=6';
        relData = await safeFetchJson(relUrl);
        isRelCountry = true;
    }
    
    if (relData.length > 0) {
        relatedListings.push({
            category: rel.slug,
            label: rel.label,
            icon: rel.icon,
            listings: relData.slice(0, 6),
            isCountry: isRelCountry
        });
    }
}

const faq = [];
const canonicalUrl = 'https://eroticmassagelancaster.top/';

// HTML content from AI (stored as variables for set:html)
const introHtml = `<p>Welcome to the ultimate guide for <strong>Erotic massage</strong> in Lancaster, United States. Whether you're a local or a visitor, our comprehensive directory helps you discover the best venues in the city.</p>

<p>Lancaster is renowned for its vibrant nightlife and wellness scene. From luxurious establishments in the city center to hidden gems in quieter neighborhoods, there's something for everyone.</p>

<p>Browse our curated selection of verified venues, complete with photos, reviews, prices, and contact information. Each listing has been carefully reviewed to ensure quality and authenticity.</p>`;
const bottomHtml = `<p>Ready to explore Erotic massage in Lancaster? Browse our listings above and find the perfect venue for your needs. All our listings include verified contact information, opening hours, and pricing.</p>

<p>Can't find what you're looking for? Our directory is constantly updated with new venues. Check back regularly or contact us if you'd like to recommend a venue.</p>`;

// Split listings for different sections
const premiumListings = listings.filter((l: any) => l.is_premium);
const goldListings = listings.filter((l: any) => l.is_gold);
const regularListings = listings.filter((l: any) => !l.is_premium);

// Get top 5 listings for hero slider (Gold first, then Premium)
const heroListings = [...goldListings, ...premiumListings.filter((l: any) => !l.is_gold), ...regularListings]
    .filter((l: any) => l.thumbnail)
    .slice(0, 5);
---

<Base 
    title="Best Erotic massage in Lancaster"
    description="Discover the finest Erotic massage venues in Lancaster, United States. Browse verified listings, reviews, and contact information."
    canonical={canonicalUrl}
    image={heroListings.length > 0 ? heroListings[0].thumbnail : 'https://erotikmaps.com/images/og-default.jpg'}
>
    <!-- Compact Hero Section -->
    <section class="hero-compact">
        <div class="container">
            <h1>Best Erotic massage in Lancaster</h1>
            <p class="hero-subtitle">{listings.length} verified venues {isCountryFallback ? 'in ' + 'United States' : 'in ' + 'Lancaster'}</p>
            <div class="hero-badges">
                {goldListings.length > 0 && <span class="badge-stat gold">‚≠ê {goldListings.length} Gold</span>}
                {premiumListings.length > 0 && <span class="badge-stat premium">‚ú® {premiumListings.length} Premium</span>}
            </div>
            <p class="last-updated">üìÖ Last updated: {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</p>
        </div>
    </section>
    
    <!-- GeoBanner - HIGH on page, right after hero -->
    <div class="home-banner-slot top-banner">
        <div class="container">
            <GeoBanner />
        </div>
    </div>
    
    <!-- Listings Grid - Mobile First -->
    <section class="listings" id="all-listings">
        <div class="container">
            <div class="listings-header">
                <h2><span class="heading-icon" aria-hidden="true">üè¢</span> Best Erotic Massage in Lancaster</h2>
                {isCountryFallback ? (
                    <p class="listings-intro fallback-notice">
                        üìç No venues listed in Lancaster yet. Showing {listings.length} verified venues from <strong>United States</strong> that you might like.
                    </p>
                ) : (
                    <p class="listings-intro">
                        Browse our curated selection of {listings.length} verified erotic massage venues in Lancaster. Gold ‚≠ê and Premium ‚ú® listings are displayed first.
                    </p>
                )}
            </div>
            <div class="listings-grid-3">
                {listings.map((listing: any) => (
                    <ListingCard listing={listing} />
                ))}
            </div>
            
            {listings.length === 0 && (
                <p class="no-listings">No listings found in Lancaster or United States. Be the first to <a href="/advertise">add your venue</a>!</p>
            )}
        </div>
    </section>
    
    <!-- Related Categories - Cross-promotion -->
    {relatedListings.length > 0 && (
        <section class="related-categories" id="related-venues">
            <div class="container">
                <h2><span class="heading-icon" aria-hidden="true">üî•</span> More Adult Entertainment Near Lancaster</h2>
                <p class="section-intro">Discover other adult venues in United States</p>
                
                {relatedListings.map((cat) => (
                    <div class="related-category-block">
                        <h3>{cat.icon} {cat.label} {cat.isCountry ? 'in ' + 'United States' : 'Near ' + 'Lancaster'}</h3>
                        <div class="listings-grid-3">
                            {cat.listings.map((listing: any) => (
                                <ListingCard listing={listing} />
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        </section>
    )}
    
    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="container">
            <h2><span class="heading-icon" aria-hidden="true">üìñ</span> About Erotic Massage in Lancaster</h2>
            <div class="about-content" set:html={introHtml} />
        </div>
    </section>
    
    <!-- Category Navigation -->
    <CategoryNav city="Lancaster" mainCategory="erotic-massage" />
    
    <!-- Table of Contents - SEO Navigation (lower on page) -->
    <nav class="toc-section" aria-label="Page contents" id="navigation">
        <div class="container">
            <details open>
                <summary class="toc-title">üìë Quick Navigation</summary>
                <ul class="toc-list">
                    <li><a href="#all-listings">üè¢ All {listings.length} Venues</a></li>
                    <li><a href="#about">üìñ About Erotic Massage</a></li>
                    <li><a href="#categories">üè∑Ô∏è Massage Types</a></li>
                    {faq && faq.length > 0 && <li><a href="#faq">‚ùì FAQ ({faq.length} questions)</a></li>}
                    <li><a href="#local-guide">üó∫Ô∏è Local Guide</a></li>
                    <li><a href="#pricing">üí∞ Pricing Guide</a></li>
                </ul>
            </details>
        </div>
    </nav>
    
    <!-- Network Links - Links to other satellite sites -->
    <NetworkLinks currentCity="Lancaster" currentCountry="United States" category="erotic-massage" />
    
    <!-- Internal Links Section -->
    <InternalLinks city="Lancaster" country="United States" category="Erotic Massage" />
    
    <!-- Owner CTA Section - Encourage venue owners to create listings -->
    <OwnerCTA city="Lancaster" country="United States" category="Erotic Massage" />
    
    <!-- FAQ Section -->
    {faq && faq.length > 0 && (
        <section class="faq" id="faq">
            <div class="container">
                <h2>Frequently Asked Questions about Erotic Massage in Lancaster</h2>
                <div class="faq-list">
                    {faq.map((item: any, index: number) => (
                        <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                            <h3 itemprop="name">{item.question}</h3>
                            <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                                <div itemprop="text" set:html={item.answer} />
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </section>
    )}
    
    <!-- Local Guide Section - Unique SEO Content -->
    <section class="local-guide" id="local-guide">
        <div class="container">
            <h2><span class="heading-icon" aria-hidden="true">üó∫Ô∏è</span> Erotic Massage Guide for Lancaster</h2>
            <div class="guide-grid">
                <div class="guide-card">
                    <h3><span class="heading-icon" aria-hidden="true">üèôÔ∏è</span> Best Areas</h3>
                    <p>Find Erotic Massage venues throughout Lancaster, from the city center to quieter neighborhoods. Each area offers unique experiences and atmospheres.</p>
                </div>
                <div class="guide-card">
                    <h3><span class="heading-icon" aria-hidden="true">‚è∞</span> Best Times to Visit</h3>
                    <p>Most Erotic Massage establishments in Lancaster operate from late morning until late evening. We recommend booking in advance, especially on weekends.</p>
                </div>
                <div class="guide-card">
                    <h3><span class="heading-icon" aria-hidden="true">üí≥</span> Payment Methods</h3>
                    <p>Venues in Lancaster typically accept cash and cards. Some premium establishments may offer discreet billing options. Always confirm payment methods when booking.</p>
                </div>
                <div class="guide-card">
                    <h3><span class="heading-icon" aria-hidden="true">üåê</span> Language</h3>
                    <p>Many Erotic Massage venues in Lancaster have English-speaking staff. For the best experience, you can use translation apps or contact venues via WhatsApp.</p>
                </div>
            </div>
            <div class="guide-tips">
                <h3><span class="heading-icon" aria-hidden="true">üí°</span> Tips for First-Time Visitors</h3>
                <ul>
                    <li>‚úì Always verify the venue is still operating by contacting them directly</li>
                    <li>‚úì Read our listings carefully for services offered and pricing ranges</li>
                    <li>‚úì Look for Gold and Premium badges for verified quality establishments</li>
                    <li>‚úì Book in advance during peak hours (evenings and weekends)</li>
                    <li>‚úì Respect the venue's rules and staff at all times</li>
                </ul>
            </div>
        </div>
    </section>
    
    <!-- Pricing Guide Section -->
    <section class="pricing-guide" id="pricing">
        <div class="container">
            <h2><span class="heading-icon" aria-hidden="true">üí∞</span> Erotic Massage Pricing in Lancaster</h2>
            <p class="pricing-intro">Prices for Erotic Massage services in Lancaster vary based on the venue, services, and duration. Here's a general guide:</p>
            <div class="pricing-table">
                <div class="price-tier">
                    <span class="tier-label">Budget</span>
                    <span class="tier-range">üíµ Lower price range</span>
                    <p>Basic services at smaller venues. Good for first-time visitors.</p>
                </div>
                <div class="price-tier featured">
                    <span class="tier-label">‚≠ê Mid-Range</span>
                    <span class="tier-range">üíµüíµ Average prices</span>
                    <p>Quality service at established venues. Most popular choice.</p>
                </div>
                <div class="price-tier">
                    <span class="tier-label">‚ú® Premium</span>
                    <span class="tier-range">üíµüíµüíµ Higher prices</span>
                    <p>Luxury experiences at top-rated Gold establishments.</p>
                </div>
            </div>
            <p class="pricing-note">üí° <strong>Tip:</strong> Contact venues directly for exact pricing. Prices may vary based on services and session duration.</p>
        </div>
    </section>
    
    <!-- Bottom Section / Call to Action -->
    <section class="bottom-content">
        <div class="container">
            <h2>Find Your Perfect Erotic Massage Experience in Lancaster</h2>
            <div class="bottom-content-text" set:html={bottomHtml} />
            
            <div class="cta-box">
                <h3>Looking for something specific?</h3>
                <p>Browse through our {listings.length} listings above, or click on any venue to see full details, photos, and contact information.</p>
                <a href="#all-listings" class="btn-primary">Browse All Listings</a>
            </div>
        </div>
    </section>
    
    
    <!-- Schema.org - ItemList -->
    <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Best Erotic massage in Lancaster",
        "description": "Discover the finest Erotic massage venues in Lancaster, United States. Browse verified listings, reviews, and contact information.",
        "url": canonicalUrl,
        "numberOfItems": listings.length,
        "itemListElement": listings.map((listing: any, index: number) => ({
            "@type": "ListItem",
            "position": index + 1,
            "item": {
                "@type": "LocalBusiness",
                "name": listing.name,
                "url": `https://eroticmassagelancaster.top/${listing.slug}`,
                "image": listing.thumbnail,
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "Lancaster",
                    "addressCountry": "United States"
                }
            }
        }))
    })}></script>
    
    <!-- Schema.org - FAQPage -->
    {faq && faq.length > 0 && (
        <script type="application/ld+json" set:html={JSON.stringify({
            "@context": "https://schema.org",
            "@type": "FAQPage",
            "mainEntity": faq.map((item: any) => ({
                "@type": "Question",
                "name": item.question,
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": item.answer
                }
            }))
        })}></script>
    )}
    
    <!-- Schema.org - WebPage -->
    <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Best Erotic massage in Lancaster",
        "description": "Discover the finest Erotic massage venues in Lancaster, United States. Browse verified listings, reviews, and contact information.",
        "url": canonicalUrl,
        "isPartOf": {
            "@type": "WebSite",
            "name": "Lancaster Erotic Massage üåç",
            "url": "https://eroticmassagelancaster.top"
        },
        "about": {
            "@type": "Thing",
            "name": "Erotic Massage in Lancaster"
        },
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://eroticmassagelancaster.top"
                }
            ]
        }
    })}></script>
    
    <!-- Sticky CTA Footer for Live Cams -->
    <a href="https://erotiklive.net/" target="_blank" rel="nofollow noopener" class="live-cta-sticky">
        <span class="live-dot"></span>
        <span class="live-text">Watch Girls Online</span>
    </a>
</Base>

<style>
    /* Sticky Live CTA Footer - Full Width */
    .live-cta-sticky {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 18px 24px;
        background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);
        color: white;
        font-weight: 700;
        font-size: 1.1rem;
        text-decoration: none;
        box-shadow: 
            0 -4px 20px rgba(236, 72, 153, 0.4),
            0 -2px 10px rgba(0, 0, 0, 0.15);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .live-cta-sticky:hover {
        background: linear-gradient(135deg, #db2777 0%, #e11d48 100%);
    }
    
    .live-dot {
        width: 14px;
        height: 14px;
        background: #22c55e;
        border-radius: 50%;
        animation: pulseDot 1.5s infinite;
        box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
    }
    
    .live-text {
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }
    
    @keyframes pulseDot {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.3); opacity: 0.85; }
    }
    
    @media (max-width: 600px) {
        .live-cta-sticky {
            padding: 16px 20px;
            font-size: 1rem;
        }
    }
    
    /* Compact Hero */
    .hero-compact {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        padding: 30px 0;
        text-align: center;
    }
    .hero-compact h1 {
        font-size: clamp(1.4rem, 4vw, 2rem);
        margin-bottom: 8px;
        font-weight: 700;
    }
    .hero-compact .hero-subtitle {
        font-size: 0.95rem;
        opacity: 0.9;
        margin-bottom: 12px;
    }
    
    /* Decorative emoji icons - hidden from SEO crawlers */
    .heading-icon {
        display: inline-block;
        margin-right: 4px;
        font-style: normal;
    }
    
    .hero-badges {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
    }
    .badge-stat {
        background: rgba(255,255,255,0.2);
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    .badge-stat.gold { background: rgba(255,215,0,0.3); }
    .badge-stat.premium { background: rgba(255,255,255,0.25); }
    .last-updated {
        font-size: 0.8rem;
        opacity: 0.7;
        margin-top: 12px;
    }
    
    /* Table of Contents */
    .toc-section {
        background: var(--card-bg);
        padding: 20px 0;
        border-bottom: 1px solid var(--border);
    }
    .toc-title {
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .toc-list {
        display: flex;
        flex-wrap: wrap;
        gap: 12px 24px;
        list-style: none;
        padding: 16px 0 0;
        margin: 0;
    }
    .toc-list li a {
        font-size: 0.9rem;
        color: var(--text);
        text-decoration: none;
        padding: 6px 12px;
        background: var(--bg);
        border-radius: 20px;
        transition: all 0.2s ease;
    }
    .toc-list li a:hover {
        background: var(--primary);
        color: white;
        text-decoration: none;
    }
    @media (max-width: 600px) {
        .toc-list { flex-direction: column; gap: 8px; }
        .toc-list li a { display: block; text-align: center; }
    }
    
    /* Local Guide Section */
    .local-guide {
        padding: 60px 0;
        background: var(--card-bg);
    }
    .local-guide h2 {
        text-align: center;
        margin-bottom: 40px;
    }
    .guide-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-bottom: 40px;
    }
    .guide-card {
        background: var(--bg);
        padding: 24px;
        border-radius: 16px;
    }
    .guide-card h3 {
        font-size: 1rem;
        margin-bottom: 10px;
        color: var(--text);
    }
    .guide-card p {
        font-size: 0.9rem;
        color: var(--text-light);
        line-height: 1.6;
    }
    .guide-tips {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        padding: 30px;
        border-radius: 16px;
        color: white;
    }
    .guide-tips h3 {
        margin-bottom: 16px;
    }
    .guide-tips ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .guide-tips li {
        padding: 8px 0;
        font-size: 0.95rem;
        opacity: 0.95;
    }
    @media (max-width: 900px) {
        .guide-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 500px) {
        .guide-grid { grid-template-columns: 1fr; }
    }
    
    /* Pricing Guide Section */
    .pricing-guide {
        padding: 60px 0;
    }
    .pricing-guide h2 {
        text-align: center;
        margin-bottom: 16px;
    }
    .pricing-intro {
        text-align: center;
        color: var(--text-light);
        margin-bottom: 40px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    .pricing-table {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }
    .price-tier {
        background: var(--card-bg);
        padding: 30px 24px;
        border-radius: 16px;
        text-align: center;
        border: 2px solid var(--border);
    }
    .price-tier.featured {
        border-color: var(--primary);
        transform: scale(1.05);
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    .tier-label {
        display: block;
        font-weight: 700;
        font-size: 1.1rem;
        margin-bottom: 8px;
        color: var(--text);
    }
    .tier-range {
        display: block;
        font-size: 1.2rem;
        margin-bottom: 12px;
    }
    .price-tier p {
        font-size: 0.9rem;
        color: var(--text-light);
        line-height: 1.5;
    }
    .pricing-note {
        text-align: center;
        font-size: 0.9rem;
        color: var(--text-light);
        background: var(--bg);
        padding: 16px;
        border-radius: 8px;
    }
    @media (max-width: 768px) {
        .pricing-table { grid-template-columns: 1fr; }
        .price-tier.featured { transform: none; }
    }
    
    /* Listings Grid - Mobile First (1 col mobile, 2 tablet, 3 desktop) */
    .listings-grid-3 {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
    }
    @media (min-width: 540px) {
        .listings-grid-3 { grid-template-columns: repeat(2, 1fr); }
    }
    @media (min-width: 900px) {
        .listings-grid-3 { grid-template-columns: repeat(3, 1fr); }
    }
    
    /* Related Categories - Cross Promotion */
    .related-categories {
        background: linear-gradient(135deg, var(--bg) 0%, var(--card-bg) 100%);
        padding: 40px 0;
        border-top: 1px solid var(--border);
    }
    .related-categories h2 {
        font-size: 1.5rem;
        margin-bottom: 8px;
        text-align: center;
    }
    .related-categories .section-intro {
        text-align: center;
        color: var(--text-light);
        margin-bottom: 30px;
    }
    .related-category-block {
        margin-bottom: 30px;
    }
    .related-category-block:last-child {
        margin-bottom: 0;
    }
    .related-category-block h3 {
        font-size: 1.2rem;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid var(--primary);
        display: inline-block;
    }
    
    @media (max-width: 768px) {
        .related-categories {
            padding: 24px 0;
        }
        .related-categories h2 {
            font-size: 1.25rem;
        }
        .related-category-block h3 {
            font-size: 1rem;
        }
    }
    
    /* About Section */
    .about-section {
        background: var(--card-bg);
        padding: 40px 0;
    }
    .about-section h2 {
        font-size: 1.4rem;
        margin-bottom: 16px;
    }
    .about-content {
        color: var(--text-light);
        line-height: 1.7;
    }
    .about-content p { margin-bottom: 12px; }
    
    /* Listings Section */
    .listings-header {
        margin-bottom: 16px;
    }
    
    .listings-header h2 {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 8px;
        color: var(--text);
    }
    
    .listings-intro {
        color: var(--text-light);
        font-size: 0.95rem;
        line-height: 1.5;
    }
    
    .listings-intro.fallback-notice {
        background: linear-gradient(135deg, var(--primary-light, #f0f7ff) 0%, var(--bg) 100%);
        padding: 12px 16px;
        border-radius: 8px;
        border-left: 3px solid var(--primary);
        font-size: 0.9rem;
    }
    
    .listings-intro.fallback-notice strong {
        color: var(--primary);
    }
    
    .section-intro {
        color: var(--text-light);
        margin-bottom: 25px;
    }
    .premium-section {
        background: linear-gradient(135deg, #D4AF3710, #F4D03F10);
    }
    .cta-box {
        background: linear-gradient(135deg, var(--primary)10, var(--secondary)10);
        padding: 30px;
        border-radius: 12px;
        margin-top: 30px;
        text-align: center;
    }
    .cta-box h3 {
        margin-bottom: 10px;
    }
    .cta-box p {
        margin-bottom: 20px;
        color: var(--text-light);
    }
    .sitemap-links {
        padding: 40px 0;
        background: var(--bg);
    }
    .sitemap-links h2 {
        font-size: 1.2rem;
        margin-bottom: 20px;
    }
    .venue-links {
        column-count: 3;
        column-gap: 30px;
        list-style: none;
        padding: 0;
    }
    .venue-links li {
        margin-bottom: 8px;
        break-inside: avoid;
    }
    .venue-links a {
        font-size: 13px;
        color: var(--text-light);
    }
    .venue-links a:hover {
        color: var(--primary);
    }
    @media (max-width: 768px) {
        .venue-links {
            column-count: 1;
        }
    }
</style>